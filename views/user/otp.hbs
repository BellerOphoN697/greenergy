<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Create Account | Greenergy</title>
    <link
      rel="icon"
      type="image/png"
      href="src/images/favicon/favicon-16x16.png"
    />
    <link
      rel="icon"
      type="image/png"
      href="src/images/favicon/favicon-16x16.png"
    />
    <link rel="stylesheet" href="src/lib/css/swiper-bundle.min.css" />
    <link rel="stylesheet" href="src/lib/css/bvselect.css" />
    <link rel="stylesheet" href="src/lib/css/bootstrap.min.css" />
    <link rel="stylesheet" href="src/css/style.css" />
  </head>

  <body>
    <div class="loader">
      <div class="loader-icon">
        <img src="src/images/loader.gif" alt="loader" />
      </div>
    </div>
    

    <!-- breedcrumb section start  -->
    <div class="section breedcrumb">
      <div class="breedcrumb__img-wrapper">
        <img src="src/images/banner/breedcrumb.jpg" alt="breedcrumb" />
        <div class="container">
          <ul class="breedcrumb__content">
            <li>
              <a href="index.html">
                <svg
                  width="18"
                  height="19"
                  viewBox="0 0 18 19"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M1 8L9 1L17 8V18H12V14C12 13.2044 11.6839 12.4413 11.1213 11.8787C10.5587 11.3161 9.79565 11 9 11C8.20435 11 7.44129 11.3161 6.87868 11.8787C6.31607 12.4413 6 13.2044 6 14V18H1V8Z"
                    stroke="#808080"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <span> > </span>
              </a>
            </li>
            <li class="active">
              <a href="create-account.html">Create Account</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <!-- breadcrumb section end   -->

    <!-- create account-in Section Start  -->
    <section class="create-account section section--xl">
      <div class="container">
        <div class="form-wrapper">
          <h6 class="font-title--sm">OTP Verification</h6>
          <div class="form-register">
              Please enter the OTP sent to your mail
            </div>
          <form>
            <div class="form-input">
              <input type="text" placeholder="OTP" name="userotp" id="userotp"/>
              <span class="icon icon-warning">
                <svg
                  width="20"
                  height="21"
                  viewBox="0 0 20 21"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M10.0003 18.8333C14.6027 18.8333 18.3337 15.1024 18.3337 10.5C18.3337 5.89762 14.6027 2.16666 10.0003 2.16666C5.39795 2.16666 1.66699 5.89762 1.66699 10.5C1.66699 15.1024 5.39795 18.8333 10.0003 18.8333Z"
                    stroke="#FF8A00"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M10 7.16666V10.5"
                    stroke="#FF8A00"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M10 13.8333H10.0083"
                    stroke="#FF8A00"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </span>
              <span class="icon icon-error">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 20 20"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M8.57465 3.21667L1.51632 15C1.37079 15.252 1.29379 15.5378 1.29298 15.8288C1.29216 16.1198 1.36756 16.4059 1.51167 16.6588C1.65579 16.9116 1.86359 17.1223 2.11441 17.2699C2.36523 17.4175 2.65032 17.4968 2.94132 17.5H17.058C17.349 17.4968 17.6341 17.4175 17.8849 17.2699C18.1357 17.1223 18.3435 16.9116 18.4876 16.6588C18.6317 16.4059 18.7071 16.1198 18.7063 15.8288C18.7055 15.5378 18.6285 15.252 18.483 15L11.4247 3.21667C11.2761 2.97176 11.0669 2.76927 10.8173 2.62874C10.5677 2.48821 10.2861 2.41438 9.99965 2.41438C9.71321 2.41438 9.43159 2.48821 9.18199 2.62874C8.93238 2.76927 8.72321 2.97176 8.57465 3.21667V3.21667Z"
                    stroke="#EA4B48"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M10 7.5V10.8333"
                    stroke="#EA4B48"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M10 14.1667H10.0083"
                    stroke="#EA4B48"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </span>
              <span class="icon icon-success">
                <svg
                  width="20"
                  height="21"
                  viewBox="0 0 20 21"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M16.6663 5.5L7.49967 14.6667L3.33301 10.5"
                    stroke="#00B307"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </span>
            </div>
            <p class="text-warning text-center">{{message}}</p>
            <div class="form-register" id="OTPtimer" >
              <span>Resend OTP in </span>
              <span id="timer"></span>
            </div>
            <div class="form-register" id="resendOTP" style="display: none;" >
              <a href="#" onclick="resendOTP()">
                Resend OTP
            </a>
            </div>
            <div class="form-register" id="resent" style="display: none;" >
              OTP Resent!
            </div>
            <div class="form-register text-danger" id="otperror" style="display: none;"></div>
            <div class="form-button" a href="#" onclick="checkOTP()">
              <button id="createAccountBtn" class="button button--md w-100">Proceed</button>
            </div>
            <div class="form-register">
              Already have account ? <a href="sign-in">Login</a>
            </div>
          </form>
        </div>
      </div>
    </section>
    <!-- create account-in Section end  -->

    

    <script src="src/lib/js/jquery.min.js"></script>
    <script src="src/lib/js/swiper-bundle.min.js"></script>
    <script src="src/lib/js/bvselect.js"></script>
    <script src="src/lib/js/bootstrap.bundle.min.js"></script>
    <script src="src/js/main.js"></script>
    <script>
      document.getElementById("createAccountBtn").addEventListener("click", function(event) {
        event.preventDefault();
         });


    function startTimer(durationInSeconds) {
      let timer = durationInSeconds;
      const timerElement = document.getElementById("timer");

      function updateTimer() {
        const minutes = Math.floor(timer / 60);
        const seconds = timer % 60;

        timerElement.textContent = `${minutes}:${seconds < 10 ? "0" : ""}${seconds}`;

        if (timer <= 0) {
          clearInterval(timerInterval);
          //timerElement.textContent = "Timer Expired!";
          document.getElementById("resendOTP").style.display = "";
          document.getElementById("OTPtimer").style.display = "none";

        }
        else{
          document.getElementById("resendOTP").style.display = "none";
          document.getElementById("OTPtimer").style.display = "";
        }

        timer--;
      }

      // Call the updateTimer function every second
      const timerInterval = setInterval(updateTimer, 1000);
    }

    // Start the timer with a duration of 5 minutes (300 seconds)
    startTimer(3);
    function resendOTP(){
      console.log("Resend requested")
      fetch('/resend')
      document.getElementById("resendOTP").style.display = "none";
      document.getElementById("resent").style.display = "";



    }
    function checkOTP(){
    console.log("otp check");
    var userotp = document.getElementById("userotp"); // Assuming userotp is the id of your OTP input field
    
    if(userotp.value === ""){
        document.getElementById("otperror").style.display = "block";
        document.getElementById("otperror").innerText = "OTP cannot be empty"; // Use innerText to set text content
        console.error("OTP not entered");
    }
    else {
      const otp=document.getElementById("userotp").value
      console.log(otp)
      const userotp=new URLSearchParams(otp)
      fetch(('/otpcheck'),{
        method:"post",
        body: userotp
      }).then((res)=>{
        if (res.ok) {
                window.location.href = '/otp-success';
                console.log('otp complete')
            } else {
                document.getElementById("otperror").style.display = "block";
                document.getElementById("otperror").innerText = "Wrong OTP entered";
        console.error("Wrong OTP entered");

            }
      }).catch(error=>{
        console.error(error)
      })
    }
}

    
  </script>
  
  </body>
</html>
